# - ------------------------------------------------------------------------ - #
ROOT_DIR			:=	C:/Sony/PSP/ProDG
BIN_DIR				:=	$(ROOT_DIR)/bin
# - ------------------------------------------------------------------------ - #
CC					:=	$(BIN_DIR)/pspsnc
CXX					:=	$(BIN_DIR)/pspsnc
LD					:=	$(BIN_DIR)/pspld
# - ------------------------------------------------------------------------ - #
INCLUDES			+=	
# - ------------------------------------------------------------------------ - #
LIBRARIES			+=	
# - ------------------------------------------------------------------------ - #
LDFLAGS				+=	-LC:/Sony/PSP/devkit/lib
# - ------------------------------------------------------------------------ - #

# - ------------------------------------------------------------------------ - #
# If problems, use -gnu=safe #
# - ------------------------------------------------------------------------ - #
CFLAGS				+=	#-gnu=full
CPPFLAGS			+=	#-gnu=full
# - ------------------------------------------------------------------------ - #

# - ------------------------------------------------------------------------ - #
# Release Build Only #
# - ------------------------------------------------------------------------ - #
ifdef NDEBUG
DEFINES				+=	NDEBUG
LDFLAGS				+=	
# - ------------------------------------------------------------------------ - #
else
# - ------------------------------------------------------------------------ - #
DEFINES				+=	
CFLAGS				+=	-gfull
CPPFLAGS			+=	-gfull
# - ------------------------------------------------------------------------ - #
endif # NDEBUG #
# - ------------------------------------------------------------------------ - #


# - ------------------------------------------------------------------------ - #
ifdef OSIZE # Optimized for Size #
# - ------------------------------------------------------------------------ - #
CFLAGS				+=	-O2
CPPFLAGS			+=	-O2
# - ------------------------------------------------------------------------ - #
else ifdef O3 # Optimized for Space #
# - ------------------------------------------------------------------------ - #
CFLAGS				+=	-O5
CPPFLAGS			+=	-O5
# - ------------------------------------------------------------------------ - #
else ifdef O0 # No Optimizations #
# - ------------------------------------------------------------------------ - #
CFLAGS				+=	-O0
CPPFLAGS			+=	-O0
# - ------------------------------------------------------------------------ - #
else # Default #
# - ------------------------------------------------------------------------ - #
CFLAGS				+=	-O0
CPPFLAGS			+=	-O0
# - ------------------------------------------------------------------------ - #
endif # Optimizations #
# - ------------------------------------------------------------------------ - #


# - ------------------------------------------------------------------------ - #
$(TARGET): $(TARGET_STUBS) $(FOLDER_STUBS) $(H_FILES) $(.O_FILES) $(OTHER_FILES_DEP) startcache
	$(LD) $(LDFLAGS) $(OTHER_O_FILES) $(.O_FILES) -o $@ $(LIBRARIES)
# - ------------------------------------------------------------------------ - #

# --depend=$@.d --depend-format=unix --no_depend_system_headers
# - ------------------------------------------------------------------------ - #
# The below 2 cause a conflict with the -include in common_makefile. #
# - ------------------------------------------------------------------------ - #
obj/$(TARGET_NAME)/%.c.o: %.c
	$(CC) $(DEFINES) $(INCLUDES) $(CFLAGS)       -c $< -o $@
# - ------------------------------------------------------------------------ - #
obj/$(TARGET_NAME)/%.cpp.o: %.cpp
	$(CXX) $(DEFINES) $(INCLUDES) $(CPPFLAGS)        -c $< -o $@
# - ------------------------------------------------------------------------ - #
