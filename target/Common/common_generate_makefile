# - ------------------------------------------------------------------------ - #
$(TARGET).mk: $(TARGET_STUBS) always startcache
	echo "# Generated by 'common_generate_makefile'" >$@
	echo "CODE_FILES := $(CODE_FILES)" >$@
	echo "DEFINES := $(DEFINES_ORIGINAL)" >$@
	echo "INCLUDES := $(INCLUDES_ORIGINAL)" >$@
	echo "LIBRARIES := $(LIBRARIES)" >$@
# - ------------------------------------------------------------------------ - #

# - ------------------------------------------------------------------------ - #
cache:
	@echo Updating Depend Cache...
	@cat $(.O_FILES:.o=.o.d)>obj/$(TARGET_NAME)/.ocache
	@echo Depend Cache Updated
# - ------------------------------------------------------------------------ - #
startcache:
	$(MAKE) --quiet --no-print-directory cache NO_DEPEND=true &
# - ------------------------------------------------------------------------ - #
obj/%/_stub:
	mkdir -p obj/$*
	@touch $@
# - ------------------------------------------------------------------------ - #
# Yes, this creates the output folder, but notes the creation under obj #
obj/$(TARGET_NAME)/output_stub:
	mkdir -p output/$(TARGET_NAME) obj/$(TARGET_NAME)
	@touch $@	
# - ------------------------------------------------------------------------ - #

# - ------------------------------------------------------------------------ - #
always:
# - ------------------------------------------------------------------------ - #
.PHONY: always cache startcache
# - ------------------------------------------------------------------------ - #
