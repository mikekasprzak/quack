# - ------------------------------------------------------------------------ - #
ROOT_DIR			:=	C:/Nintendo/ghs/multi5320
BIN_DIR				:=	$(ROOT_DIR)
# - ------------------------------------------------------------------------ - #
CC					:=	$(BIN_DIR)/ccppc
CXX					:=	$(BIN_DIR)/cxppc
LD					:=	$(BIN_DIR)/elxr
# - ------------------------------------------------------------------------ - #
INCLUDES			+=	
# - ------------------------------------------------------------------------ - #
LIBRARIES			+=	-lansi -lmath -larch -ldbmem -lece -ledge -lghssys -lind -lmulti -lnoflt -lstartup
# - ------------------------------------------------------------------------ - #
LDFLAGS				+=	-LC:/Nintendo/ghs/multi5320/lib/ppc
# - ------------------------------------------------------------------------ - #

# - ------------------------------------------------------------------------ - #
CFLAGS				+=	-gnu=full
CPPFLAGS			+=	-gnu=full
# - ------------------------------------------------------------------------ - #

# - ------------------------------------------------------------------------ - #
# Release Build Only #
# - ------------------------------------------------------------------------ - #
ifdef NDEBUG
DEFINES				+=	NDEBUG
LDFLAGS				+=	
# - ------------------------------------------------------------------------ - #
else
# - ------------------------------------------------------------------------ - #
DEFINES				+=	
CFLAGS				+=	-G
CPPFLAGS			+=	-G
# - ------------------------------------------------------------------------ - #
endif # NDEBUG #
# - ------------------------------------------------------------------------ - #


# - ------------------------------------------------------------------------ - #
ifdef OSIZE # Optimized for Size #
# - ------------------------------------------------------------------------ - #
CFLAGS				+=	-Ospace
CPPFLAGS			+=	-Ospace
# - ------------------------------------------------------------------------ - #
else ifdef O3 # Optimized for Space #
# - ------------------------------------------------------------------------ - #
CFLAGS				+=	-Ospeed
CPPFLAGS			+=	-Ospeed
# - ------------------------------------------------------------------------ - #
else ifdef O0 # No Optimizations #
# - ------------------------------------------------------------------------ - #
CFLAGS				+=	-Odebug
CPPFLAGS			+=	-Odebug
# - ------------------------------------------------------------------------ - #
else # Default #
# - ------------------------------------------------------------------------ - #
CFLAGS				+=	-Odebug
CPPFLAGS			+=	-Odebug
# - ------------------------------------------------------------------------ - #
endif # Optimizations #
# - ------------------------------------------------------------------------ - #


# - ------------------------------------------------------------------------ - #
$(TARGET): $(TARGET_STUBS) $(FOLDER_STUBS) $(H_FILES) $(.O_FILES) $(OTHER_FILES_DEP) startcache
	$(LD) $(LDFLAGS) $(OTHER_O_FILES) $(.O_FILES) -o $@ $(LIBRARIES)
# - ------------------------------------------------------------------------ - #

# --depend=$@.d --depend-format=unix --no_depend_system_headers
# - ------------------------------------------------------------------------ - #
# The below 2 cause a conflict with the -include in common_makefile. #
# - ------------------------------------------------------------------------ - #
obj/$(TARGET_NAME)/%.c.o: %.c
	$(CC) $(DEFINES) $(INCLUDES) $(CFLAGS)       -c $< -o $@
# - ------------------------------------------------------------------------ - #
obj/$(TARGET_NAME)/%.cpp.o: %.cpp
	$(CXX) $(DEFINES) $(INCLUDES) $(CPPFLAGS)        -c $< -o $@
# - ------------------------------------------------------------------------ - #
